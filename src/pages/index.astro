---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

const places = await getCollection("places");
---

<Layout title="One Place a Day">
  <div class="places-container">
    {
      places.map(({ id, data: { name, snippet, thumbnail_url } }, index) => (
        <a
          href={`/places/${id}`}
          class:list={[
            "single-place-container",
            index % 2 === 0 ? "row" : "row-reverse",
          ]}
        >
          <img
            src={thumbnail_url}
            alt={`Thumbnail of ${name}`}
            width="100"
            height="100"
          />
          <div class="text">
            <h3>{name}</h3>
            <p>{snippet}</p>
          </div>
        </a>
      ))
    }
  </div>
</Layout>

<style>
  .places-container {
    display: flex;
    flex-direction: column;
    gap: 3em;
    padding-block: 2em;
  }
  .single-place-container {
    display: flex;
    gap: 1em;
    text-decoration: none;
  }
  .row {
    flex-direction: row;
  }
  .row-reverse {
    flex-direction: row-reverse;
  }
  .image {
    min-width: 100px;
    min-height: 100px;
    background-color: red;
  }
  .text {
    display: block;
  }
  .text p {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
    line-clamp: 3;
    overflow: hidden;
  }
  @media only screen and (min-width: 768px) {
    .places-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      row-gap: 2em;
      column-gap: 1em;
    }
    .single-place-container {
    }
    .row {
      flex-direction: inherit;
    }
    .row-reverse {
      flex-direction: inherit;
    }
    .image {
      min-height: 200px;
      width: 100%;
      height: 100%;
    }
    .text {
      display: none;
    }
  }
  @media only screen and (min-width: 1280px) {
    .places-container {
      grid-template-columns: repeat(4, 1fr);
    }
    .row {
      flex-direction: inherit;
    }
    .row-reverse {
      flex-direction: inherit;
    }
    .image: {
      height: 300px;
      min-height: 300px;
    }
  }
</style>
